<%@page import="org.apache.struts2.components.Include"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@taglib prefix="bs" uri="/WEB-INF/BootStrapHandler.tld"%>
<jsp:include page="../header.jsp" />
<link href="../fileupload/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
<link href="../dist/css/jquery.autocomplete.css" media="all" rel="stylesheet" type="text/css" />
<link href="../dist/css/throbber.css" media="all" rel="stylesheet" type="text/css" />
<link href="../plugins/jquery-confirm/css/jquery-confirm.css" media="all" rel="stylesheet" type="text/css" />
<link href="../node_modules/suneditor/dist/css/suneditor.min.css" media="all" rel="stylesheet" type="text/css" />

<s:set var="hideit" value="(hideit)" />
<style>

    		
tr:hover{
	//font-weight: bold;
}
.tempSearch{
width:100%;
}

.text-warning{
color:#f39c12;
}
.text-success{
color:#00a65a

}
.vulnControl i{
font-size: large;
padding-right: 10px;
color: #b8c7ce !important;
}
.vulnControl i:hover{
	color: #00c0ef !important;
}
.vulnControl-add i:hover{
	color: #05a55a !important;
}
.vulnControl-delete i:hover{
	color: #de4b39 !important;
}



</style>

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
    
      <i class="glyphicon glyphicon-th-list"></i> Assessment
      <b><s:property value="assessment.appId"/> - <s:property value="assessment.name"/></b>
      <small>
      <s:if test="assessment.InPr"> <span class="text-warning fa fa-eye"></span><b class="text-warning"> (in Peer Review)</b></s:if>
      <s:if test="assessment.prComplete"> <span class="text-success fa fa-eye"></span><b class="text-success"> (Peer Review Completed)</b></s:if>
      <s:if test="notowner"> <span class="text-warning fa fa-warning"></span><b  class="text-warning"> (Manager View)</b></s:if>
      </small>
    </h1>
  </section>

  <!-- Main content -->
  <section class="content">
  <div id="infobar" style="width:90%; margin-right:auto;margin-left:auto">
  <bs:row>

  <s:iterator value="levels" begin="9" end="0" step="-1" status="stat">
    	 	<s:if test="risk != null && risk != 'Unassigned' && risk != ''">
    	 	  <div class="col-sm-1">
				<div class="small-box" style="border-width:1px; border-style:solid;">
		            <div class="inner">
		              <h3>${counts.get(riskId)}</h3>
		              <p>${risk }</p>
		            </div>
		            <div class="icon">
		              <s:if test="risk.toLowerCase().startsWith('info') || risk.toLowerCase().startsWith('rec')">
		              	<i class="fa fa-info"></i>
		              </s:if>
		              <s:else>
		              	<i class="fa fa-bug"></i>
		              </s:else>
		            </div>
		             
		          </div>
		         </div>
			</s:if>
</s:iterator>


</bs:row>
</div> 	

  
   <!-- START TABS -->
        
<div class="row">
<div class="col-md-12">
 <div class="nav-tabs-custom">
   <ul class="nav nav-tabs">
     <li><a href="Assessment" >Overview</a></li>
     <li class="active"><a href="VulnerabilityView">Vulnerabilities</a></li>
     <li><a href="CheckList">Checklists</a></li>
     <li><a href="Assessment#tab_3">Finalize</a></li>
     <li><a href="Assessment#tab_4">History</a></li>
     <li><a href="AuditLog" >Audit</a></li>
   </ul>
   <div class="tab-content">
     
     <div class="tab-pane active" id="tab_2">
       <jsp:include page="AddVuln.jsp" />
     </div><!-- /.tab-pane -->
     
     </div><!-- /.tab-pane -->
   </div><!-- /.tab-content -->
 </div><!-- nav-tabs-custom -->
</div><!-- /.col -->
</div>
  
 
 

<s:hidden value="%{id}" name="assessmentId"></s:hidden>
<s:hidden value="%{hideit}" name="disable"></s:hidden>
<script>
	let vulnTypes = []
	<s:iterator value="vulntypes" status="stat">
		vulnTypes.push(${id});
	</s:iterator>

     function getValueFromId(id){
		  switch(id){
		  	<s:iterator value="levels">
		  	case "${riskId}": return "${risk}";
		  	</s:iterator>
		  	default : return "Unassigned";
		  }
         return -1;
	  }
	   function getIdFromValue(value){
		  switch(value){
		  	<s:iterator value="levels">
		  	case "${risk}": return ${riskId};
		  	</s:iterator>
		  	default : return "-1";
		  }
         return -1;
	  }
</script>
<jsp:include page="../footer.jsp" />
<script src="../dist/js/vulnview.js" charset="utf-8"></script>

  </body>
</html>